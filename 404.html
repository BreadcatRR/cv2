<!DOCTYPE html>
<html>
	<link rel="stylesheet" href="/404.css">
  <head>
	<meta charset="utf-8"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>CV2 Chip lookup</title>
  </head>
  <body>
	<div id='main'>

	</div>
</body>
  <script>
	async function fetchCV2() {
		var resp = await fetch('https://raw.githubusercontent.com/tyleo-rec/CircuitsV2Resources/master/misc/circuitsv2.json')
		var data = await resp.json()
		return data
	}

	async function main() {
		if ( location.href.includes('chip') ) {
				const cv2 = await fetchCV2()
				var keys = Object.keys(cv2)
				
				var path = location.href.indexOf('chip');
				var requested_chip = location.href.split('/').filter(x => x != '').at(-1)
				
				console.log(requested_chip)

				for (var i = 0; i < keys.length; i++) {
					var chip = cv2[keys[i]]
					console.log(chip)
					console.log(keys[i])
					if (chip.ReadonlyName.toLowerCase().split(' ').join('-') == requested_chip.toLowerCase()) {
						var title = document.createElement('p')
						var description = document.createElement('p')

						title.textContent == chip.ReadonlyName
						
						if (chip.Description != ''){ description.textContent = chip.Description }
						else { description.textContent = 'No Description Available.' }

					}
				}

			} else {
				console.log(location.href)

			}
	}
	
	main()
  </script>
</html>
